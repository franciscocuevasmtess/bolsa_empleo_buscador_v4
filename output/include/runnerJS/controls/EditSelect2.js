
Runner.controls.EditSelect2=Runner.extend(Runner.controls.Control,{constructor:function(cfg){this.addEvent(["change","keyup"]);Runner.controls.EditSelect2.superclass.constructor.call(this,cfg);if(this.getFieldSetting("required")===true){this.addValidation("IsRequired");}
$("."+this.valContId).select2.defaults.set("width",this.getFieldSetting("FieldWidth"));$this=this;function formatSelect(lookup){if(!lookup.id){return lookup.text;}
var baseUrl=$this.getFieldSetting("urlImage");baseUrl=baseUrl.replace('{1}',lookup.image);var lookup=$('<span><img src="'+baseUrl+'" width="'+$this.getFieldSetting("widthImage")+'" class="img-select2" /> '+lookup.text+'</span>');return lookup;};var values=this.getFieldSetting("DefaultValue").split(',');var options={};options.language=this.getFieldSetting("language");options.placeholder=this.getFieldSetting("placeholder");options.allowClear=this.getFieldSetting("allowClear");options.maximumSelectionLength=this.getFieldSetting("maximumSelectionLength");options.tag=true;options.data=this.getFieldSetting("data");if(this.getFieldSetting("renderImage")===true){options.templateResult=formatSelect;}
var S2=$("."+this.valContId).select2(options);$("."+this.valContId).val(values);$("."+this.valContId).trigger('change');},isEmpty:function(){if(this.getValue()===null)
return[];},getForSubmit:function(){if(!this.appearOnPage()){return[];}
var values_string=this.getValue();if(typeof this.getValue()=='object'){var values=this.getValue();values_string=values.join();}
var realCb=$("."+this.valContId);var cbClone=document.createElement('input');$(cbClone).attr('type','hidden');$(cbClone).attr('id',realCb.attr('id'));$(cbClone).attr('name',realCb.attr('name'));$(cbClone).val(values_string);return[cbClone];}});Runner.controls.constants["EditSelect2"]="EditSelect2";