
Runner.pages.PageSettings.addPageEvent('personas-pasos',Runner.pages.constants.PAGE_EDIT,"afterPageReady",function(pageObj,proxy,pageid,inlineRow,inlineObject,row){pageObj.toggleItem("text_accion_postularse",false);document.getElementById("nextstep1").addEventListener("click",function(){verificarFragmentoUrl();});document.getElementById("stepnav1").addEventListener("click",function(){verificarFragmentoUrl();});function verificarFragmentoUrl(){var fragmento=window.location.hash;if(fragmento==="#8"){pageObj.toggleItem("text_accion_postularse",true);}else{pageObj.toggleItem("text_accion_postularse",false);}}
var ctrlestado_civil=Runner.getControl(pageid,'estado_civil');ctrlestado_civil.makeReadonly();var ctrlddistrito=Runner.getControl(pageid,'distrito_id');ctrlddistrito.makeReadonly();var ctrlnombre=Runner.getControl(pageid,'nombre');ctrlnombre.setDisabled();var ctrlapellidos=Runner.getControl(pageid,'apellidos');ctrlapellidos.setDisabled();var ctrlnacionalidad=Runner.getControl(pageid,'nacionalidad');ctrlnacionalidad.setDisabled();var ctrlfechanac=Runner.getControl(pageid,'fechanac');ctrlfechanac.setDisabled();var ctrlsexo=Runner.getControl(pageid,'sexo');ctrlsexo.setDisabled();var ctrlresumen=Runner.getControl(pageid,'resumen');ctrlresumen.addStyle('text-transform: uppercase;');var ctrldireccion=Runner.getControl(pageid,'domicilio');ctrldireccion.addStyle('text-transform: uppercase;');var multi_discapa=Runner.getControl(pageid,'multiselect_discapacidades');var multi_discapa2=Runner.getControl(pageid,'porcentaje_discapacidad');var multi_discapa3=Runner.getControl(pageid,'adjunto_certificado_discapacidad');var multi_discapa4=Runner.getControl(pageid,'adjunto_potencial_discapacidad');pageObj.hideField("porcentaje_discapacidad");pageObj.hideField("adjunto_certificado_discapacidad");pageObj.hideField("adjunto_potencial_discapacidad");if(multi_discapa.getValue()!='1'){pageObj.showField("porcentaje_discapacidad");pageObj.showField("adjunto_certificado_discapacidad");pageObj.showField("adjunto_potencial_discapacidad");}
multi_discapa.on('change',function(j){if(this.getValue()!='1'){pageObj.showField("porcentaje_discapacidad");pageObj.showField("adjunto_certificado_discapacidad");pageObj.showField("adjunto_potencial_discapacidad");multi_discapa2.setValue('');}
if(this.getValue()=='1'){pageObj.hideField("porcentaje_discapacidad");pageObj.hideField("adjunto_certificado_discapacidad");pageObj.hideField("adjunto_potencial_discapacidad");}
if(this.getValue()==''){pageObj.hideField("porcentaje_discapacidad");pageObj.hideField("adjunto_certificado_discapacidad");pageObj.hideField("adjunto_potencial_discapacidad");multi_discapa2.setValue('');}});;});Runner.pages.fieldsEvents["city_id_event"]=function(pageObj,pageid,row){if(row){row=new Runner.AjaxRow(pageObj,row);}
var ret,reqParams,ctrl=this,fieldsData={},params={},ajax=new Runner.form.Button({id:'city_id_event',btnName:'city_id_event'}),before=function(){params["value"]=this.getValue();},after=function(result){var ctrlc=Runner.getControl(pageid,'distrito_id');ctrlc.setValue(result["distrito_id"]);},submit=function(){params["table"]="personas-pasos";params["field"]=ctrl.fieldName;params.page=pageObj.pageName;(Runner.controls.ControlStorage.byId(pageid)||[]).forEach(function(ctrl){if(!(ctrl instanceof Runner.controls.MultiUploadField)&&!(ctrl instanceof Runner.controls.FileControl)){fieldsData[ctrl.fieldName]=ctrl.getStringValue();}});reqParams={params:JSON.stringify(params),event:"city_id_event",pageType:pageObj.pageType,keys:JSON.stringify(pageObj.keys?pageObj.keys:(row&&row.getKeys())),fieldsData:JSON.stringify(fieldsData)};if(pageObj.masterTable){reqParams.masterTable=pageObj.masterTable;reqParams=Runner.apply(reqParams,pageObj.masterKeys);}
$.post(Runner.getPageUrl("buttonhandler"),reqParams,function(result){var _result;try{_result=JSON.parse(result);}catch(e){Runner.displayGenericAjaxError(result);}
after.call(ctrl,_result);}).fail(function(jqXHR,textStatus,errorThrown){Runner.displayGenericAjaxError(jqXHR.responseText||textStatus+' '+errorThrown);});submit=function(){};};ajax.submitHandler=submit;ajax.submit=submit;ret=before.call(this);if(ret===false){return;}
submit();};